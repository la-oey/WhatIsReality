<!--
TODO:
1. get images of products
2. make product list correct
3. randomize product list
4. make the actual content of the experiment not filler.
5. make it less ugly.
 -->

<!DOCTYPE html>
<html>
<html lang="en-US">
<meta charset="UTF-8">
<head>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script type="text/javascript" src='js/client.js'></script>
    <script type="text/javascript" src='js/dataio.js'></script>
    <script type="text/javascript" src='js/script.js'></script>
    <script type="text/javascript" src='js/utils.js'></script>
    <script type="text/javascript" src='js/vars.js'></script>
    <script type="text/javascript" src='js/clickMapping.js'></script>

</head>


<body onload="pageLoad();">

<div id="consent" class="screen">
    <h1 class="mtitle">University of California, San Diego<br>
        Consent to act as a research subject</h1>
    <p> Edward Vul, Ph.D. is conducting a research study to find out more about decision
        making.
        You have been asked to participate because you are an undergraduate here at UCSD. <br><br>
        <b>PROCEDURES.</b> If you agree to participate in this study, the following will happen to you:<br></p>
    <p style="margin-left: 15%; margin-right: 15%">
        1. You will sit at the computer and play a game.<br>
        2. Try to get the highest score you can.<br><br>
    </p>
    <p>
        <b>RISKS</b>. No potential risks or discomforts are anticipated except for the possibility that some tasks may
        be slightly boring.<br><br>
        <b>PAYMENT/REMUNERATION</b>. In consideration of your time and inconvenience, you will receive 1/2 hour of course
        credit. The procedures and length of participation will last approximately 30 minutes.<br><br>
        <b>RIGHTS.</b> You may call the UCSD Human Research Protection Program at 858-657-5100 to ask about your rights
        as a research subject or to report research-related problems.<br><br>
        <b>BENEFITS</b>. There will be no direct benefit to you from these procedures. However, the investigator may
        learn more about basic questions pertaining to memory, perception, cognition, and learning. This knowledge may
        have benefits to society in fields ranging from education to design of airplane cockpits, but these benefits
        will be indirect.<br><br>
        <b>EXPLANATION.</b> The researcher has explained this study to you and answered your questions. If you have
        questions or research related problems, you may reach Edward Vul at 858-534-4401.<br><br>
        <b>VOLUNTARY NATURE OF PARTICIPATION.</b> Participation in research is entirely voluntary. You may refuse to
        participate or withdraw at any time without penalty.<br><br>
        <b>CONFIDENTIALITY.</b> Research records will be kept confidential to the extent allowed by law. As with all
        research, there is also the possibility of loss of confidentiality. Information from participants will be
        identified by a study number. The database which relates the study number to a specific subject will be
        maintained in the study coordinators office.<br><br>
        <b>COPY OF CONSENT.</b> You have received a copy of this consent document to keep and a copy of the Experimental
        Bill of Rights.
    </p>


    <button class="big-button active-button" onclick="clickConsent();"> Click here to consent and agree to participate</button>
</div>

<div id="instructions" class="screen">
    <p class="mtitle">
        Instructions for the game. Please read carefully.
    </p>
    <div>
    	<p>This is what a round looks like:</p>
    </div>
    <center><img src="img/InstructionImg.png" width="80%"></center><br>
    <button class="big-button active-button" id="continueLead" onclick="clickInstructions();">Click here to continue</button>
</div>


<div id="prePractice" class="screen">
    <p class="mtitle">
        First, you'll have <b id="instructPractice"></b> practice rounds.
    </p>
    <button class="big-button active-button" id="continueLead" onclick="clickPrePractice();">Click here to continue</button>
</div>

<div id="postPractice" class="screen">
    <p class="mtitle">
        Nice job! You're ready to move on to the experiment.
    </p>
    <div>
       <p>Next, you and your opponent will play <b id="instructRounds"></b> rounds. Good luck!</p>
    </div>
    <button class="big-button active-button" id="continueLead" onclick="clickPostPractice();">Click here to continue</button>
</div>

<div id="trial" class="screen">
    <p class="mtitle trialNum">Round</p>
    <div id="trialInstruct"></div><br>
    <div id="wrapper">
        <div id="urn">
            <svg id="urnsvg"></svg>
        </div>
        <img id="jar" src="img/jar.jpg">
    </div>

    <br>
    <div id="sendResponse" class="trialText">
        <p class='instructText'>
            <br>Each <b style='color:red'>red</b> you report is 1 point for you; each <b style='color:blue'>blue</b> is 1 point for your opponent.<br>
            You have <b id='redRep'></b> <b style='color:red'>red</b> marbles and 
            your opponent has <b id='blueRep'></b> <b style='color:blue'>blue</b> marbles.
        </p>
    </div>
    <div id="receiveResponse" class="trialText">
        <p>Your opponent said they drew <b id='reportedMarbles'></b> red marbles.<br><br>
        <label>Say how many <b style="color:red">red</b> marbles you think your opponent drew.</label>
        <input type='text' id='reportTruth' value='' size='3' maxlength='3' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false'/></p>
    </div>
    <center><div id="waiting" class="trialText"><p>Waiting</p></div></center>
    <br><br>
    <button class="big-button active-button" id="next" type="button">Next!</button>
</div>

<div id="scoreboard" class="screen">
	<p class="mtitle trialNum">Round</p><br>
    <div id="catchQ"></div><br>
    <center>
		<div id="sliderContainer">
	    	<input id='slider' class='inactiveSlider' type='range' min='0' max='100' value=''><br>
	    	<div class="min"><p>most<br>blue</p></div>
	    	<div class="max"><p>most<br>red</p></div>
	    </div>
	    <div id="postSlider"></div><br>
	</center>
	<br>
	<p class="scoreReport" id="calledBS"></p>

    <div class="scoreboardDiv" id="trialScoreboardDiv">
        <div class="scoreCol"><b id="playerPts"></b></div>
        <div class="scoreCol"><b id="oppPts"></b></div>
    </div>
	<div class="scoreboardDiv" id="totalScoreboardDiv">
        <center><h2>Scoreboard</h2></center>
	    <div class="scoreCol">Your Score:<br><b class="totalScores playerScore">0</b></div>
	    <div class="scoreCol">Opponent's Score:<br><b class="totalScores oppScore">0</b></div>
 	</div>
	<br><br><br><br><br>
    <button class="big-button active-button" id="nextScoreboard" type="button" onclick="trialDone();">Next!</button>
</div>


<div id="completed" class="screen">
    <center><h1>Scoreboard</h1></center>
    <div class="scoreboardDiv">
        <div class="scoreCol">Your Score:<br><b class="playerScore">0</b></div>
        <div class="scoreCol">Opponent's Score:<br><b class="oppScore">0</b></div>
    </div>
    <p class="mtitle" id="whowon"></p>
    <div id="statsBox">
        <center><h3>Your Stats</h3></center>
        <p> 
            You told the truth: <b id="stat_truth"></b>
        </p><br>
        <p class="indent">
            Your opponent accepted your reported value: <b id="stat_truth_noBS"></b><br>
            Your opponent rejected but you told the truth: <b id="stat_truth_BS"></b><br>
        </p>
        <p>
            You lied: <b id="stat_lie"></b>
        </p><br>
        <p class="indent">
            Your opponent accepted, but you lied: <b id="stat_lie_noBS"></b><br>
            Your opponent caught you lying: <b id="stat_lie_BS"></b><br>
        </p>
        <br><br>
        <p> 
            You accepted your opponent's report: <b id="stat_noBS"></b>
        </p><br>
        <p class="indent">
            You accepted and your opponent told the truth: <b id="stat_noBS_truth"></b><br>
            You accepted and your opponent lied: <b id="stat_noBS_lie"></b><br>
        </p>
        <p>
            You rejected your opponent's report: <b id="stat_BS"></b>
        </p><br>
        <p class="indent">
            You rejected but your opponent told the truth: <b id="stat_BS_truth"></b><br>
            You rejected and your opponent lied: <b id="stat_BS_lie"></b><br>
        </p>

    </div>
    <p class="mtitle">Thank you for your participation!</p>
    <button class="big-button active-button" id="finished" onclick="experimentDone();">Finished!</button>
</div>

</body>
